'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _getIterator2 = require('babel-runtime/core-js/get-iterator');

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var cov_h9xkk3li7 = function () {
  var path = '/Users/mdahlstrom/Documents/GitHub/web-bluetooth-vuex-module/src/actions/characteristic.js',
      hash = '39a59a6d1e5b56fad4c80174ac9f12fb455f3a26',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/mdahlstrom/Documents/GitHub/web-bluetooth-vuex-module/src/actions/characteristic.js',
    statementMap: {
      '0': {
        start: {
          line: 3,
          column: 30
        },
        end: {
          line: 48,
          column: 1
        }
      },
      '1': {
        start: {
          line: 5,
          column: 36
        },
        end: {
          line: 5,
          column: 38
        }
      },
      '2': {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 18,
          column: 5
        }
      },
      '3': {
        start: {
          line: 7,
          column: 28
        },
        end: {
          line: 7,
          column: 68
        }
      },
      '4': {
        start: {
          line: 8,
          column: 6
        },
        end: {
          line: 11,
          column: 7
        }
      },
      '5': {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 9,
          column: 95
        }
      },
      '6': {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 10,
          column: 54
        }
      },
      '7': {
        start: {
          line: 13,
          column: 6
        },
        end: {
          line: 17,
          column: 7
        }
      },
      '8': {
        start: {
          line: 14,
          column: 29
        },
        end: {
          line: 14,
          column: 86
        }
      },
      '9': {
        start: {
          line: 15,
          column: 8
        },
        end: {
          line: 15,
          column: 95
        }
      },
      '10': {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 16,
          column: 54
        }
      },
      '11': {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 19,
          column: 82
        }
      },
      '12': {
        start: {
          line: 22,
          column: 25
        },
        end: {
          line: 22,
          column: 45
        }
      },
      '13': {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 27,
          column: 5
        }
      },
      '14': {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 26,
          column: 8
        }
      },
      '15': {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 92
        }
      },
      '16': {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 30,
          column: 5
        }
      },
      '17': {
        start: {
          line: 29,
          column: 6
        },
        end: {
          line: 29,
          column: 38
        }
      },
      '18': {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 33,
          column: 5
        }
      },
      '19': {
        start: {
          line: 32,
          column: 6
        },
        end: {
          line: 32,
          column: 47
        }
      },
      '20': {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 34,
          column: 68
        }
      },
      '21': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 43,
          column: 5
        }
      },
      '22': {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 38,
          column: 56
        }
      },
      '23': {
        start: {
          line: 40,
          column: 6
        },
        end: {
          line: 40,
          column: 22
        }
      },
      '24': {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 42,
          column: 76
        }
      },
      '25': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 74
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 24,
            column: 68
          },
          end: {
            line: 24,
            column: 69
          }
        },
        loc: {
          start: {
            line: 24,
            column: 77
          },
          end: {
            line: 26,
            column: 7
          }
        },
        line: 24
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 6,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 6,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        }, {
          start: {
            line: 6,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        }],
        line: 6
      },
      '1': {
        loc: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        }, {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        }],
        line: 23
      },
      '2': {
        loc: {
          start: {
            line: 23,
            column: 7
          },
          end: {
            line: 23,
            column: 111
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 23,
            column: 7
          },
          end: {
            line: 23,
            column: 37
          }
        }, {
          start: {
            line: 23,
            column: 41
          },
          end: {
            line: 23,
            column: 73
          }
        }, {
          start: {
            line: 23,
            column: 77
          },
          end: {
            line: 23,
            column: 111
          }
        }],
        line: 23
      },
      '3': {
        loc: {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        }, {
          start: {
            line: 28,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        }],
        line: 28
      },
      '4': {
        loc: {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        }, {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        }],
        line: 31
      },
      '5': {
        loc: {
          start: {
            line: 31,
            column: 8
          },
          end: {
            line: 31,
            column: 78
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 31,
            column: 8
          },
          end: {
            line: 31,
            column: 40
          }
        }, {
          start: {
            line: 31,
            column: 44
          },
          end: {
            line: 31,
            column: 78
          }
        }],
        line: 31
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0
    },
    f: {
      '0': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _mutationTypes = require('../mutation-types');

var MutationTypes = _interopRequireWildcard(_mutationTypes);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var CharacteristicActions = (cov_h9xkk3li7.s[0]++, {
  webBluetoothDiscoverCharacteristics: function () {
    var _ref2 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(_ref, query) {
      var dispatch = _ref.dispatch,
          commit = _ref.commit;

      var discoveredCharacteristics, characteristics, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, characteristic, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, characteristicUUID;

      return _regenerator2.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              discoveredCharacteristics = (cov_h9xkk3li7.s[1]++, []);
              cov_h9xkk3li7.s[2]++;

              if (!(query.characteristics === undefined)) {
                _context.next = 40;
                break;
              }

              cov_h9xkk3li7.b[0][0]++;
              cov_h9xkk3li7.s[3]++;
              _context.next = 7;
              return query.service.getCharacteristics();

            case 7:
              characteristics = _context.sent;
              cov_h9xkk3li7.s[4]++;
              _iteratorNormalCompletion = true;
              _didIteratorError = false;
              _iteratorError = undefined;
              _context.prev = 12;
              _iterator = (0, _getIterator3.default)(characteristics);

            case 14:
              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {
                _context.next = 24;
                break;
              }

              characteristic = _step.value;
              cov_h9xkk3li7.s[5]++;
              _context.next = 19;
              return dispatch('webBluetoothConfigureCharacteristic', { characteristic: characteristic });

            case 19:
              cov_h9xkk3li7.s[6]++;

              discoveredCharacteristics.push(characteristic);

            case 21:
              _iteratorNormalCompletion = true;
              _context.next = 14;
              break;

            case 24:
              _context.next = 30;
              break;

            case 26:
              _context.prev = 26;
              _context.t0 = _context['catch'](12);
              _didIteratorError = true;
              _iteratorError = _context.t0;

            case 30:
              _context.prev = 30;
              _context.prev = 31;

              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }

            case 33:
              _context.prev = 33;

              if (!_didIteratorError) {
                _context.next = 36;
                break;
              }

              throw _iteratorError;

            case 36:
              return _context.finish(33);

            case 37:
              return _context.finish(30);

            case 38:
              _context.next = 75;
              break;

            case 40:
              cov_h9xkk3li7.b[0][1]++;
              cov_h9xkk3li7.s[7]++;
              _iteratorNormalCompletion2 = true;
              _didIteratorError2 = false;
              _iteratorError2 = undefined;
              _context.prev = 45;
              _iterator2 = (0, _getIterator3.default)(query.characteristics);

            case 47:
              if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {
                _context.next = 61;
                break;
              }

              characteristicUUID = _step2.value;
              cov_h9xkk3li7.s[8]++;
              _context.next = 52;
              return query.service.getCharacteristic(characteristicUUID);

            case 52:
              characteristic = _context.sent;
              cov_h9xkk3li7.s[9]++;
              _context.next = 56;
              return dispatch('webBluetoothConfigureCharacteristic', { characteristic: characteristic });

            case 56:
              cov_h9xkk3li7.s[10]++;

              discoveredCharacteristics.push(characteristic);

            case 58:
              _iteratorNormalCompletion2 = true;
              _context.next = 47;
              break;

            case 61:
              _context.next = 67;
              break;

            case 63:
              _context.prev = 63;
              _context.t1 = _context['catch'](45);
              _didIteratorError2 = true;
              _iteratorError2 = _context.t1;

            case 67:
              _context.prev = 67;
              _context.prev = 68;

              if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
              }

            case 70:
              _context.prev = 70;

              if (!_didIteratorError2) {
                _context.next = 73;
                break;
              }

              throw _iteratorError2;

            case 73:
              return _context.finish(70);

            case 74:
              return _context.finish(67);

            case 75:
              cov_h9xkk3li7.s[11]++;

              commit(MutationTypes.BLE_CHARACTERISTICS_DISCOVERED, discoveredCharacteristics);

            case 77:
            case 'end':
              return _context.stop();
          }
        }
      }, _callee, this, [[12, 26, 30, 38], [31,, 33, 37], [45, 63, 67, 75], [68,, 70, 74]]);
    }));

    function webBluetoothDiscoverCharacteristics(_x, _x2) {
      return _ref2.apply(this, arguments);
    }

    return webBluetoothDiscoverCharacteristics;
  }(),
  webBluetoothConfigureCharacteristic: function () {
    var _ref4 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(_ref3, query) {
      var dispatch = _ref3.dispatch,
          commit = _ref3.commit;
      var characteristic;
      return _regenerator2.default.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              characteristic = (cov_h9xkk3li7.s[12]++, query.characteristic);
              cov_h9xkk3li7.s[13]++;

              if ((cov_h9xkk3li7.b[2][0]++, characteristic.properties.read) || (cov_h9xkk3li7.b[2][1]++, characteristic.properties.notify) || (cov_h9xkk3li7.b[2][2]++, characteristic.properties.indicate)) {
                cov_h9xkk3li7.b[1][0]++;
                cov_h9xkk3li7.s[14]++;

                characteristic.addEventListener('characteristicvaluechanged', function (event) {
                  cov_h9xkk3li7.f[0]++;
                  cov_h9xkk3li7.s[15]++;

                  dispatch('webBluetoothUpdateCharacteristic', { characteristic: query.characteristic });
                });
              } else {
                cov_h9xkk3li7.b[1][1]++;
              }
              cov_h9xkk3li7.s[16]++;

              if (!characteristic.properties.read) {
                _context2.next = 11;
                break;
              }

              cov_h9xkk3li7.b[3][0]++;
              cov_h9xkk3li7.s[17]++;
              _context2.next = 9;
              return characteristic.readValue();

            case 9:
              _context2.next = 12;
              break;

            case 11:
              cov_h9xkk3li7.b[3][1]++;

            case 12:
              cov_h9xkk3li7.s[18]++;

              if (!((cov_h9xkk3li7.b[5][0]++, characteristic.properties.notify) || (cov_h9xkk3li7.b[5][1]++, characteristic.properties.indicate))) {
                _context2.next = 20;
                break;
              }

              cov_h9xkk3li7.b[4][0]++;
              cov_h9xkk3li7.s[19]++;
              _context2.next = 18;
              return characteristic.startNotifications();

            case 18:
              _context2.next = 21;
              break;

            case 20:
              cov_h9xkk3li7.b[4][1]++;

            case 21:
              cov_h9xkk3li7.s[20]++;

              commit(MutationTypes.BLE_CHARACTERISTIC_CHANGED, characteristic);

            case 23:
            case 'end':
              return _context2.stop();
          }
        }
      }, _callee2, this);
    }));

    function webBluetoothConfigureCharacteristic(_x3, _x4) {
      return _ref4.apply(this, arguments);
    }

    return webBluetoothConfigureCharacteristic;
  }(),
  webBluetoothWriteCharacteristic: function () {
    var _ref6 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(_ref5, query) {
      var dispatch = _ref5.dispatch,
          commit = _ref5.commit;
      return _regenerator2.default.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              cov_h9xkk3li7.s[21]++;
              _context3.prev = 1;
              cov_h9xkk3li7.s[22]++;
              _context3.next = 5;
              return query.characteristic.writeValue(query.value);

            case 5:
              _context3.next = 11;
              break;

            case 7:
              _context3.prev = 7;
              _context3.t0 = _context3['catch'](1);
              cov_h9xkk3li7.s[23]++;

              console.error(_context3.t0);

            case 11:
              _context3.prev = 11;
              cov_h9xkk3li7.s[24]++;

              commit(MutationTypes.BLE_CHARACTERISTIC_CHANGED, query.characteristic);
              return _context3.finish(11);

            case 15:
            case 'end':
              return _context3.stop();
          }
        }
      }, _callee3, this, [[1, 7, 11, 15]]);
    }));

    function webBluetoothWriteCharacteristic(_x5, _x6) {
      return _ref6.apply(this, arguments);
    }

    return webBluetoothWriteCharacteristic;
  }(),
  webBluetoothUpdateCharacteristic: function () {
    var _ref8 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(_ref7, query) {
      var dispatch = _ref7.dispatch,
          commit = _ref7.commit;
      return _regenerator2.default.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              cov_h9xkk3li7.s[25]++;

              commit(MutationTypes.BLE_CHARACTERISTIC_CHANGED, query.characteristic);

            case 2:
            case 'end':
              return _context4.stop();
          }
        }
      }, _callee4, this);
    }));

    function webBluetoothUpdateCharacteristic(_x7, _x8) {
      return _ref8.apply(this, arguments);
    }

    return webBluetoothUpdateCharacteristic;
  }()
});

exports.default = CharacteristicActions;
//# sourceMappingURL=characteristic.js.map