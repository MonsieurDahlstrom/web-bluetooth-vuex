{"version":3,"sources":["../src/web-bluetooth-store-utils.js"],"names":["Cannonical128UUIDBase","DFU_BASE","DFUSecure","replace","DFU_CHAR_BASE","DFUSecureControlPoint","DFUSecurePacket","WebBluetoothStoreUtils","methods","cannonicalUUIDFor16bitUUID","UUID16","toString","disService","device","DeviceInformationUUID","$store","getters","webBluetoothServicesForDevice","find","service","uuid","dfuService","valueForCharacteristicUUID","characteristic","webBluetoothCharacteristicsForService","value","stringForCharacteristicValue","dataview","text","i","l","byteLength","String","fromCharCode","getUint8"],"mappings":";;;;;AAAA,IAAMA,wBAAwB,sCAA9B;;AAEA,IAAMC,WAAW,sCAAjB;AACO,IAAMC,gCAAYD,SAASE,OAAT,CAAiB,MAAjB,EAAyB,MAAzB,CAAlB;AACP,IAAMC,gBAAgB,sCAAtB;AAEO,IAAMC,wDAAwBD,cAAcD,OAAd,CAAsB,MAAtB,EAA8B,MAA9B,CAA9B;AAEA,IAAMG,4CAAkBF,cAAcD,OAAd,CAAsB,MAAtB,EAA8B,MAA9B,CAAxB;;AAEP,IAAMI,yBAAyB;AAC7BC,WAAS;AACPC,gCAA4B,oCAAUC,MAAV,EAAkB;AAC5C,aAAOV,sBAAsBG,OAAtB,CAA8B,MAA9B,EAAsCO,OAAOC,QAAP,CAAgB,EAAhB,CAAtC,CAAP;AACD,KAHM;AAIPC,gBAAY,oBAAUC,MAAV,EAAkB;AAC5B,UAAIC,wBAAwB,KAAKL,0BAAL,CAAgC,MAAhC,CAA5B;AACA,aAAO,KAAKM,MAAL,CAAYC,OAAZ,CAAoBC,6BAApB,CAAkDJ,MAAlD,EAA0DK,IAA1D,CAA+D,UAACC,OAAD;AAAA,eAAaA,QAAQC,IAAR,KAAiBN,qBAA9B;AAAA,OAA/D,CAAP;AACD,KAPM;AAQPO,gBAAY,oBAAUR,MAAV,EAAkB;AAC5B,aAAO,KAAKE,MAAL,CAAYC,OAAZ,CAAoBC,6BAApB,CAAkDJ,MAAlD,EAA0DK,IAA1D,CAA+D,UAACC,OAAD;AAAA,eAAaA,QAAQC,IAAR,KAAiBnB,QAA9B;AAAA,OAA/D,CAAP;AACD,KAVM;AAWPqB,gCAA4B,oCAAUH,OAAV,EAAmBC,IAAnB,EAAyB;AACnD,UAAIG,iBAAiB,KAAKR,MAAL,CAAYC,OAAZ,CAAoBQ,qCAApB,CAA0DL,OAA1D,EAAmED,IAAnE,CAAwE,UAACK,cAAD;AAAA,eAAoBA,eAAeH,IAAf,KAAwBA,IAA5C;AAAA,OAAxE,CAArB;AACA,aAAOG,eAAeE,KAAtB;AACD,KAdM;AAePC,kCAA8B,sCAAUC,QAAV,EAAoB;AAChD,UAAIC,OAAO,EAAX;AACA,WAAK,IAAIC,IAAI,CAAR,EAAWC,IAAIH,SAASI,UAA7B,EAAyCF,IAAIC,CAA7C,EAAgDD,GAAhD,EAAqD;AACnDD,gBAAQI,OAAOC,YAAP,CAAoBN,SAASO,QAAT,CAAkBL,CAAlB,CAApB,CAAR;AACD;AACD,aAAOD,IAAP;AACD;AArBM;AADoB,CAA/B;;kBA0BerB,sB","file":"web-bluetooth-store-utils.js","sourcesContent":["const Cannonical128UUIDBase = '0000XXXX-0000-1000-8000-00805f9b34fb'\r\n// DFU by Nordic Semiconductor\r\nconst DFU_BASE = '0000xxxx-0000-1000-8000-00805f9b34fb'\r\nexport const DFUSecure = DFU_BASE.replace('xxxx', 'fe59')\r\nconst DFU_CHAR_BASE = '8ec9xxxx-f315-4f60-9fb8-838830daea50'\r\n// Control Point is notify, write\r\nexport const DFUSecureControlPoint = DFU_CHAR_BASE.replace('xxxx', '0001')\r\n// Packet is Write No Response\r\nexport const DFUSecurePacket = DFU_CHAR_BASE.replace('xxxx', '0002')\r\n\r\nconst WebBluetoothStoreUtils = {\r\n  methods: {\r\n    cannonicalUUIDFor16bitUUID: function (UUID16) {\r\n      return Cannonical128UUIDBase.replace('XXXX', UUID16.toString(16))\r\n    },\r\n    disService: function (device) {\r\n      var DeviceInformationUUID = this.cannonicalUUIDFor16bitUUID(0x180A)\r\n      return this.$store.getters.webBluetoothServicesForDevice(device).find((service) => service.uuid === DeviceInformationUUID)\r\n    },\r\n    dfuService: function (device) {\r\n      return this.$store.getters.webBluetoothServicesForDevice(device).find((service) => service.uuid === DFU_BASE)\r\n    },\r\n    valueForCharacteristicUUID: function (service, uuid) {\r\n      var characteristic = this.$store.getters.webBluetoothCharacteristicsForService(service).find((characteristic) => characteristic.uuid === uuid)\r\n      return characteristic.value\r\n    },\r\n    stringForCharacteristicValue: function (dataview) {\r\n      var text = ''\r\n      for (var i = 0, l = dataview.byteLength; i < l; i++) {\r\n        text += String.fromCharCode(dataview.getUint8(i))\r\n      }\r\n      return text\r\n    }\r\n  }\r\n}\r\n\r\nexport default WebBluetoothStoreUtils\r\n"]}