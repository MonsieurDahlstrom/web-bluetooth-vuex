{"version":3,"sources":["../../src/mutations/device.js"],"names":["MutationTypes","DeviceMutatations","BLE_DEVICE_ADDED","state","payload","deviceIndex","devices","indexOf","device","push","splice","BLE_DEVICE_REMOVED","services","filter","service","characteristics","includes","characteristic","characterToDelete","characteristicIndex","serviceToDelete","serviceIndex","BLE_DEVICE_UPDATED"],"mappings":";;;;;;;;;;;;;;;;AAAA;;;;AACA;;IAAYA,a;;;;;;AAEZ,IAAMC,gGACHD,cAAcE,gBADX,YAC8BC,KAD9B,EACqCC,OADrC,EAC8C;AAChD,MAAMC,cAAcF,MAAMG,OAAN,CAAcC,OAAd,CAAsBH,QAAQI,MAA9B,CAApB;AACA,MAAIH,cAAc,CAAlB,EAAqB;AACnBF,UAAMG,OAAN,CAAcG,IAAd,CAAmBL,QAAQI,MAA3B;AACD,GAFD,MAEO;AACLL,UAAMG,OAAN,CAAcI,MAAd,CAAqBL,WAArB,EAAiC,CAAjC,EAAmCD,QAAQI,MAA3C;AACD;AACF,CARG,qDASHR,cAAcW,kBATX,YASgCR,KAThC,EASuCC,OATvC,EASgD;AAClD,MAAMC,cAAcF,MAAMG,OAAN,CAAcC,OAAd,CAAsBH,QAAQI,MAA9B,CAApB;AACA,MAAII,WAAWT,MAAMS,QAAN,CAAeC,MAAf,CAAsB;AAAA,WAAWC,QAAQN,MAAR,KAAmBJ,QAAQI,MAAtC;AAAA,GAAtB,CAAf;AACA,MAAIO,kBAAkBZ,MAAMY,eAAN,CAAsBF,MAAtB,CAA6B;AAAA,WAAkBD,SAASI,QAAT,CAAkBC,eAAeH,OAAjC,CAAlB;AAAA,GAA7B,CAAtB;AAHkD;AAAA;AAAA;;AAAA;AAIlD,oDAA6BC,eAA7B,4GAA8C;AAAA,UAAtCG,iBAAsC;;AAC5C,UAAIC,sBAAsBhB,MAAMY,eAAN,CAAsBR,OAAtB,CAA8BW,iBAA9B,CAA1B;AACAf,YAAMY,eAAN,CAAsBL,MAAtB,CAA6BS,mBAA7B,EAAiD,CAAjD;AACD;AAPiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAQlD,qDAA2BP,QAA3B,iHAAqC;AAAA,UAA7BQ,eAA6B;;AACnC,UAAIC,eAAelB,MAAMS,QAAN,CAAeL,OAAf,CAAuBa,eAAvB,CAAnB;AACAjB,YAAMS,QAAN,CAAeF,MAAf,CAAsBW,YAAtB,EAAmC,CAAnC;AACD;AAXiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYlDlB,QAAMG,OAAN,CAAcI,MAAd,CAAqBL,WAArB,EAAkC,CAAlC;AACD,CAtBG,qDAuBHL,cAAcsB,kBAvBX,YAuBgCnB,KAvBhC,EAuBuCC,OAvBvC,EAuBgD;AAClD,MAAMC,cAAcF,MAAMG,OAAN,CAAcC,OAAd,CAAsBH,QAAQI,MAA9B,CAApB;AACA,MAAIH,cAAc,CAAlB,EAAqB;AACnBF,UAAMG,OAAN,CAAcG,IAAd,CAAmBL,QAAQI,MAA3B;AACD,GAFD,MAEO;AACLL,UAAMG,OAAN,CAAcI,MAAd,CAAqBL,WAArB,EAAiC,CAAjC,EAAmCD,QAAQI,MAA3C;AACD;AACF,CA9BG,sBAAN;;kBAiCeP,iB","file":"device.js","sourcesContent":["import Vue from 'vue'\nimport * as MutationTypes from '../mutation-types'\n\nconst DeviceMutatations = {\n  [MutationTypes.BLE_DEVICE_ADDED] (state, payload) {\n    const deviceIndex = state.devices.indexOf(payload.device)\n    if (deviceIndex < 0) {\n      state.devices.push(payload.device)\n    } else {\n      state.devices.splice(deviceIndex,1,payload.device)\n    }\n  },\n  [MutationTypes.BLE_DEVICE_REMOVED] (state, payload) {\n    const deviceIndex = state.devices.indexOf(payload.device)\n    let services = state.services.filter(service => service.device === payload.device)\n    let characteristics = state.characteristics.filter(characteristic => services.includes(characteristic.service))\n    for(let characterToDelete of characteristics) {\n      let characteristicIndex = state.characteristics.indexOf(characterToDelete)\n      state.characteristics.splice(characteristicIndex,1)\n    }\n    for(let serviceToDelete of services) {\n      let serviceIndex = state.services.indexOf(serviceToDelete)\n      state.services.splice(serviceIndex,1)\n    }\n    state.devices.splice(deviceIndex, 1)\n  },\n  [MutationTypes.BLE_DEVICE_UPDATED] (state, payload) {\n    const deviceIndex = state.devices.indexOf(payload.device)\n    if (deviceIndex < 0) {\n      state.devices.push(payload.device)\n    } else {\n      state.devices.splice(deviceIndex,1,payload.device)\n    }\n  }\n}\n\nexport default DeviceMutatations\n"]}